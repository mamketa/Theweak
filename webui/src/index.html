<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
     name="viewport"
     content="width=device-width,
              initial-scale=1.0,
              maximum-scale=1.0,
              user-scalable=no"
     />
    <link href="styles/index.css" type="text/css" rel="stylesheet" />
    <script type="module" src="scripts/webui_utils.js"></script>
    <script type="module" src="scripts/block_copy.js"></script>
    <script type="module" src="scripts/language.js"></script>
  </head>

  <body class="bg-surface flex justify-center min-h-screen root_layout">
    <main class="p-3 text-sm w-full max-w-2xl">
      <!-- ========== HEADER ========== -->
      <div class="flex justify-between items-center mb-6 text-on-surface">
        <h1 data-i18n="common.module" class="text-lg font-semibold"></h1>
        <div class="language-wrapper">
          <select id="languageSelector" class="select select-sm bg-surface-container text-on-surface"></select>
        </div>
      </div>

      <!-- ========== HERO DAEMON CARD (full background image) ========== -->
      <div class="hero-card mb-6 p-5 rounded-xl relative overflow-hidden card_border_daemon">
        <!-- background image: JS updates src, used as cover -->
        <img id="nusantara_logo" class="absolute inset-0 w-full h-full object-cover" alt="" />
        <!-- gradient overlay for text readability -->
        <div class="absolute inset-0 bg-gradient-to-t from-[#1e3b2b]/90 via-[#2d4a37]/60 to-transparent"></div>
        <!-- status text & pid, absolutely positioned over image -->
        <div class="relative z-10 flex flex-col h-32 justify-end text-shadow">
          <span id="daemon_status" class="text-3xl font-semibold text-[#efe6d7]"></span>
          <span id="daemon_pid" class="text-sm mt-1 text-[#d4c9b5]"></span>
        </div>
      </div>

      <!-- ========== DEVICE & MODULE INFO (symmetrical, earthy icons) ========== -->
      <div class="bg-surface-container mb-4 p-5 rounded-xl text-on-surface card_border">
        <!-- Module -->
        <div class="py-3 flex items-start gap-4 border-b border-outline/30">
          <div class="icon-earth shrink-0 mt-1">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4 L20 4 L20 20 L4 20 Z" />
              <path d="M8 8 L16 8 L16 16 L8 16 Z" fill="currentColor" fill-opacity="0.1" />
              <circle cx="12" cy="12" r="2" fill="currentColor" />
            </svg>
          </div>
          <div class="flex-1 flex justify-between items-center">
            <h3 data-i18n="common.module" class="text-sm font-medium text-on-surface"></h3>
            <span id="module_version" class="text-xs text-on-surface-variant"></span>
          </div>
        </div>

        <!-- Profile -->
        <div class="py-3 flex items-start gap-4 border-b border-outline/30">
          <div class="icon-earth shrink-0 mt-1">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
              <path d="M5 16V20M6 4V8M7 18H3M8 6H4M13 4L14.7528 8.44437C14.9407 8.92083 15.0347 9.15906 15.1786 9.35994C15.3061 9.538 15.462 9.69391 15.6401 9.82143C15.8409 9.9653 16.0792 10.0593 16.5556 10.2472L21 12L16.5556 13.7528C16.0792 13.9407 15.8409 14.0347 15.6401 14.1786C15.462 14.3061 15.3061 14.462 15.1786 14.6401C15.0347 14.8409 14.9407 15.0792 14.7528 15.5556L13 20L11.2472 15.5556C11.0593 15.0792 10.9653 14.8409 10.8214 14.6401C10.6939 14.462 10.538 14.3061 10.3599 14.1786C10.1591 14.0347 9.92083 13.9407 9.44437 13.7528L5 12L9.44437 10.2472C9.92083 10.0593 10.1591 9.9653 10.3599 9.82143C10.538 9.69391 10.6939 9.538 10.8214 9.35994C10.9653 9.15906 11.0593 8.92083 11.2472 8.44437L13 4Z" />
            </svg>
          </div>
          <div class="flex-1 flex justify-between items-center">
            <h3 data-i18n="common.profile" class="text-sm font-medium text-on-surface"></h3>
            <span id="nusantara_profile" class="text-xs text-on-surface-variant"></span>
          </div>
        </div>

        <!-- Kernel -->
        <div class="py-3 flex items-start gap-4 border-b border-outline/30">
          <div class="icon-earth shrink-0 mt-1">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
              <path d="M4 18L10 12L4 6" />
              <path d="M12 18H20" stroke-miterlimit="10" />
            </svg>
          </div>
          <div class="flex-1 flex justify-between items-center">
            <h3 data-i18n="common.kernel" class="text-sm font-medium text-on-surface"></h3>
            <span id="kernel_version" class="text-xs text-on-surface-variant"></span>
          </div>
        </div>

        <!-- Chipset -->
        <div class="py-3 flex items-start gap-4 border-b border-outline/30">
          <div class="icon-earth shrink-0 mt-1">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
              <path d="M12.4286 10L11 12H13L11.5714 14" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M4 12C4 8.22876 4 6.34315 5.17157 5.17157C6.34315 4 8.22876 4 12 4C15.7712 4 17.6569 4 18.8284 5.17157C20 6.34315 20 8.22876 20 12C20 15.7712 20 17.6569 18.8284 18.8284C17.6569 20 15.7712 20 12 20C8.22876 20 6.34315 20 5.17157 18.8284C4 17.6569 4 15.7712 4 12Z" />
              <path d="M4 12H2" stroke-linecap="round"/><path d="M22 12H20" stroke-linecap="round"/>
              <path d="M4 9H2" stroke-linecap="round"/><path d="M22 9H20" stroke-linecap="round"/>
              <path d="M4 15H2" stroke-linecap="round"/><path d="M22 15H20" stroke-linecap="round"/>
              <path d="M12 20L12 22" stroke-linecap="round"/><path d="M12 2L12 4" stroke-linecap="round"/>
              <path d="M9 20L9 22" stroke-linecap="round"/><path d="M9 2L9 4" stroke-linecap="round"/>
              <path d="M15 20L15 22" stroke-linecap="round"/><path d="M15 2L15 4" stroke-linecap="round"/>
              <path d="M17 14C17 15.4142 17 16.1213 16.5607 16.5607C16.1213 17 15.4142 17 14 17H10C8.58579 17 7.87868 17 7.43934 16.5607C7 16.1213 7 15.4142 7 14V10C7 8.58579 7 7.87868 7.43934 7.43934C7.87868 7 8.58579 7 10 7H14C15.4142 7 16.1213 7 16.5607 7.43934C17 7.87868 17 8.58579 17 10" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="flex-1 flex justify-between items-center">
            <h3 data-i18n="common.chipset" class="text-sm font-medium text-on-surface"></h3>
            <span id="chipset_name" class="text-xs text-on-surface-variant"></span>
          </div>
        </div>

        <!-- Android SDK -->
        <div class="py-3 flex items-start gap-4">
          <div class="icon-earth shrink-0 mt-1">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
              <circle cx="12" cy="8" r="4" />
              <path d="M5 16v2a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3v-2" />
              <path d="M8 12h8" />
            </svg>
          </div>
          <div class="flex-1 flex justify-between items-center">
            <h3 data-i18n="common.androidSDK" class="text-sm font-medium text-on-surface"></h3>
            <span id="android_sdk" class="text-xs text-on-surface-variant"></span>
          </div>
        </div>
      </div>

      <!-- ========== SETTINGS ========== -->
      <div class="bg-surface-container mb-4 p-5 rounded-xl text-on-surface card_border">
        <h2 data-i18n="settings.title" class="text-base font-semibold mb-4 text-[#d4c089]"></h2>

        <!-- DND -->
        <div class="flex items-center justify-between py-2">
          <div class="flex items-center gap-1">
            <span data-i18n="settings.dnd_gameplay"></span>
            <button class="btn btn-circle btn-ghost btn-xs text-[#9e8b6f] info-btn" data-title-key="modal.dnd_title" data-desc-key="modal.dnd_desc">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-4 w-4 stroke-current">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </button>
          </div>
          <label class="relative inline-flex cursor-pointer items-center">
            <input id="dnd_switch" type="checkbox" class="peer sr-only" />
            <label for="dnd_switch" class="hidden"></label>
            <div class="peer h-6 w-11 rounded-full border border-outline bg-surface-variant after:absolute after:left-[2px] after:top-0.5 after:h-5 after:w-5 after:rounded-full after:border after:border-4 after:border-surface-variant after:bg-outline after:transition-all after:content-[''] peer-checked:border-[#6d8f7a] peer-checked:bg-[#4a6b57] peer-checked:after:translate-x-full peer-checked:after:border-[#efe6d7] peer-checked:after:bg-[#efe6d7]"></div>
          </label>
        </div>

        <!-- Lite Mode -->
        <div class="flex items-center justify-between py-2">
          <div class="flex items-center gap-1">
            <span data-i18n="settings.lite_mode"></span>
            <button class="btn btn-circle btn-ghost btn-xs text-[#9e8b6f] info-btn" data-title-key="modal.lite_mode_title" data-desc-key="modal.lite_mode_desc">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-4 w-4 stroke-current">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </button>
          </div>
          <label class="relative inline-flex cursor-pointer items-center">
            <input id="lite_mode_switch" type="checkbox" class="peer sr-only" />
            <label for="lite_mode_switch" class="hidden"></label>
            <div class="peer h-6 w-11 rounded-full border border-outline bg-surface-variant after:absolute after:left-[2px] after:top-0.5 after:h-5 after:w-5 after:rounded-full after:border after:border-4 after:border-surface-variant after:bg-outline after:transition-all after:content-[''] peer-checked:border-[#6d8f7a] peer-checked:bg-[#4a6b57] peer-checked:after:translate-x-full peer-checked:after:border-[#efe6d7] peer-checked:after:bg-[#efe6d7]"></div>
          </label>
        </div>

        <!-- Device Mitigation -->
        <div class="flex items-center justify-between py-2">
          <div class="flex items-center gap-1">
            <span data-i18n="settings.device_mitigation"></span>
            <button class="btn btn-circle btn-ghost btn-xs text-[#9e8b6f] info-btn" data-title-key="modal.device_mitigation_title" data-desc-key="modal.device_mitigation_desc">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-4 w-4 stroke-current">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </button>
          </div>
          <label class="relative inline-flex cursor-pointer items-center">
            <input id="device_mitigation_switch" type="checkbox" class="peer sr-only" />
            <label for="device_mitigation_switch" class="hidden"></label>
            <div class="peer h-6 w-11 rounded-full border border-outline bg-surface-variant after:absolute after:left-[2px] after:top-0.5 after:h-5 after:w-5 after:rounded-full after:border after:border-4 after:border-surface-variant after:bg-outline after:transition-all after:content-[''] peer-checked:border-[#6d8f7a] peer-checked:bg-[#4a6b57] peer-checked:after:translate-x-full peer-checked:after:border-[#efe6d7] peer-checked:after:bg-[#efe6d7]"></div>
          </label>
        </div>

        <!-- CPU gov dropdowns (full width, natural) -->
        <div class="pt-3 mt-2 space-y-3">
          <div>
            <p class="mb-2 text-sm" data-i18n="settings.default_cpu_gov"></p>
            <select id="default_cpu_gov" class="select bg-[#2c3a31] text-xs text-[#efe6d7] w-full p-2 border border-[#6d8f7a]/40 rounded-xl"></select>
          </div>
          <div>
            <p class="mb-2 text-sm" data-i18n="settings.powersave_cpu_gov"></p>
            <select id="powersave_cpu_gov" class="select bg-[#2c3a31] text-xs text-[#efe6d7] w-full p-2 border border-[#6d8f7a]/40 rounded-xl"></select>
          </div>
        </div>
      </div>

      <!-- ========== ACTIONS ========== -->
      <div class="bg-surface-container mb-4 p-5 rounded-xl card_border">
        <h2 data-i18n="actions.title" class="text-base font-semibold mb-4 text-[#d4c089]"></h2>
        <button data-i18n="actions.edit_gamelist" id="edit_gamelist_btn" class="btn action-btn w-full py-2 mb-2" onclick="edit_gamelist.showModal()"></button>
        <button data-i18n="actions.create_shortcut" id="create_shortcut_btn" class="btn action-btn w-full py-2 mb-2 hidden"></button>
        <button data-i18n="actions.save_logs" id="save_log_btn" class="btn action-btn w-full py-2"></button>
      </div>

      <!-- ========== DONATE (original structure, refined style) ========== -->
      <button id="donate_btn" class="donate-footer text-left text-on-surface bg-surface-container mb-4 p-5 rounded-xl w-full active:bg-[#3d4e3f] transition duration-300 card_border">
        <h2 data-i18n="support.title" class="text-base font-semibold px-1 mb-1 text-[#d4c089]"></h2>
        <p data-i18n="support.description" class="text-sm text-on-surface-variant px-1"></p>
      </button>

      <!-- ========== MODALS (unchanged IDs) ========== -->
      <dialog id="info_modal" class="modal">
        <div class="modal-box bg-surface-container text-on-surface card_border">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 id="info_modal_title" class="text-lg font-bold"></h3>
          <p id="info_modal_desc" class="py-4"></p>
        </div>
      </dialog>

      <dialog id="edit_gamelist" class="modal">
        <div class="modal-box bg-surface-container text-on-surface card_border">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 data-i18n="modal.edit_gamelist_title" class="text-lg font-bold"></h3>
          <p data-i18n="modal.edit_gamelist_desc" class="py-4"></p>
          <textarea id="gamelist_textarea" class="w-full p-2 text-sm text-on-surface bg-[#1f2c23] border border-[#6d8f7a]/50 outline-none shadow-none rounded-md resize-none mb-2" rows="14"></textarea>
          <form method="dialog">
            <button data-i18n="modal.save_changes" id="save_gamelist_btn" class="btn btn-block btn-sm bg-[#4a6b57] text-[#efe6d7] font-normal mb-2 hover:bg-[#3f5c48] duration-300 border-0"></button>
            <button data-i18n="modal.cancel_changes" class="btn btn-block btn-sm bg-[#2f3e33] text-[#d4c9b5] font-normal hover:bg-[#3c4e41] duration-300 border border-[#6d8f7a]/30"></button>
          </form>
        </div>
      </dialog>

      <dialog id="custom_modal" class="modal">
        <div class="modal-box bg-surface-container text-on-surface card_border">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 id="custom_modal_title" class="text-lg font-bold"></h3>
          <p id="custom_modal_desc" class="py-4"></p>
        </div>
      </dialog>
    </main>
  </body>
</html>
